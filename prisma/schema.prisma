generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                        Int                 @id @default(autoincrement())
  roleId                    Int?                @map("role_id")
  avatar                    String?
  name                      String
  lastName                  String?             @map("last_name")
  cpf                       String              @unique
  phone                     String
  email                     String              @unique
  password                  String
  loggedIn                  Boolean             @default(false) @map("logged_in")
  banned                    Boolean             @default(false)
  inviter                   Int?
  inviterCode               String?             @unique @map("inviter_code")
  affiliateRevenueShare     Decimal?            @default(0) @map("affiliate_revenue_share") @db.Decimal(10, 2)
  affiliateRevenueShareFake Decimal?            @default(0) @map("affiliate_revenue_share_fake") @db.Decimal(10, 2)
  affiliateCpa              Decimal?            @default(0) @map("affiliate_cpa") @db.Decimal(10, 2)
  affiliateBaseline         Decimal?            @default(0) @map("affiliate_baseline") @db.Decimal(10, 2)
  isDemoAgent               Boolean             @default(false) @map("is_demo_agent")
  isAdmin                   Boolean             @default(false) @map("is_admin")
  language                  String              @default("pt")
  emailVerifiedAt           DateTime?           @map("email_verified_at")
  rememberToken             String?             @map("remember_token")
  createdAt                 DateTime            @default(now()) @map("created_at")
  updatedAt                 DateTime            @updatedAt @map("updated_at")
  affiliateHistories        AffiliateHistory[]
  affiliateWithdraws        AffiliateWithdraw[]
  deposits                  Deposit[]
  gameFavorites             GameFavorite[]
  gameLikes                 GameLike[]
  gameReviews               GameReview[]
  missionUsers              MissionUser[]
  subAffiliates             SubAffiliate[]
  transactions              Transaction[]
  inviterUser               User?               @relation("UserInviter", fields: [inviter], references: [id])
  invitedUsers              User[]              @relation("UserInviter")
  vipUser                   VipUser?
  wallet                    Wallet?
  withdrawals               Withdrawal[]

  @@map("users")
}

model PasswordResetToken {
  id        Int      @id @default(autoincrement())
  email     String
  token     String   @unique
  expiresAt DateTime @map("expires_at")
  createdAt DateTime @default(now()) @map("created_at")

  @@map("password_reset_tokens")
}

model Wallet {
  id                     Int      @id @default(autoincrement())
  userId                 Int      @unique @map("user_id")
  currency               String   @default("BRL")
  symbol                 String   @default("R$")
  balance                Decimal  @default(0) @db.Decimal(20, 2)
  balanceWithdrawal      Decimal  @default(0) @map("balance_withdrawal") @db.Decimal(20, 2)
  balanceDepositRollover Decimal  @default(0) @map("balance_deposit_rollover") @db.Decimal(20, 2)
  balanceBonus           Decimal  @default(0) @map("balance_bonus") @db.Decimal(20, 2)
  balanceBonusRollover   Decimal  @default(0) @map("balance_bonus_rollover") @db.Decimal(20, 2)
  balanceCryptocurrency  Decimal  @default(0) @map("balance_cryptocurrency") @db.Decimal(20, 2)
  balanceDemo            Decimal  @default(0) @map("balance_demo") @db.Decimal(20, 2)
  referRewards           Decimal  @default(0) @map("refer_rewards") @db.Decimal(20, 2)
  totalBet               Decimal  @default(0) @map("total_bet") @db.Decimal(20, 2)
  totalWon               Decimal  @default(0) @map("total_won") @db.Decimal(20, 2)
  totalLose              Decimal  @default(0) @map("total_lose") @db.Decimal(20, 2)
  lastWon                Decimal  @default(0) @map("last_won") @db.Decimal(20, 2)
  lastLose               Decimal  @default(0) @map("last_lose") @db.Decimal(20, 2)
  hideBalance            Boolean  @default(false) @map("hide_balance")
  active                 Boolean  @default(true)
  vipLevel               Int      @default(0) @map("vip_level")
  vipPoints              Decimal  @default(0) @map("vip_points") @db.Decimal(20, 2)
  createdAt              DateTime @default(now()) @map("created_at")
  updatedAt              DateTime @updatedAt @map("updated_at")
  user                   User     @relation(fields: [userId], references: [id])

  @@map("wallets")
}

model Transaction {
  id            Int      @id @default(autoincrement())
  paymentId     String?  @map("payment_id")
  reference     String?
  userId        Int      @map("user_id")
  paymentMethod String?  @map("payment_method")
  price         Decimal  @db.Decimal(20, 2)
  currency      String   @default("BRL")
  acceptBonus   Boolean  @default(false) @map("accept_bonus")
  status        Int      @default(0)
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")
  user          User     @relation(fields: [userId], references: [id])

  @@map("transactions")
}

model Deposit {
  id        Int      @id @default(autoincrement())
  paymentId String?  @map("payment_id")
  userId    Int      @map("user_id")
  amount    Decimal  @db.Decimal(20, 2)
  type      String?
  proof     String?
  currency  String   @default("BRL")
  symbol    String   @default("R$")
  status    Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  user      User     @relation(fields: [userId], references: [id])

  @@map("deposits")
}

model Withdrawal {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  amount    Decimal  @db.Decimal(20, 2)
  type      String?
  proof     String?
  currency  String   @default("BRL")
  symbol    String   @default("R$")
  status    Int      @default(0)
  pixKey    String?  @map("pix_key")
  pixType   String?  @map("pix_type")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  user      User     @relation(fields: [userId], references: [id])

  @@map("withdrawals")
}

model WalletChange {
  id            Int      @id @default(autoincrement())
  userId        Int      @map("user_id")
  amount        Decimal  @db.Decimal(20, 2)
  beforeBalance Decimal  @map("before_balance") @db.Decimal(20, 2)
  afterBalance  Decimal  @map("after_balance") @db.Decimal(20, 2)
  type          String
  description   String?
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  @@map("wallet_changes")
}

model SystemWallet {
  id        Int      @id @default(autoincrement())
  label     String
  value     Decimal  @db.Decimal(20, 2)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("system_wallets")
}

model Provider {
  id           Int      @id @default(autoincrement())
  code         String   @unique
  name         String
  rtp          Int?
  status       Int      @default(1)
  distribution String?
  views        Int      @default(0)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
  games        Game[]

  @@map("providers")
}

model Category {
  id          Int            @id @default(autoincrement())
  name        String
  description String?
  image       String?
  slug        String         @unique
  createdAt   DateTime       @default(now()) @map("created_at")
  updatedAt   DateTime       @updatedAt @map("updated_at")
  games       CategoryGame[]

  @@map("categories")
}

model Game {
  id            Int            @id @default(autoincrement())
  providerId    Int            @map("provider_id")
  gameServerUrl String?        @map("game_server_url")
  gameId        String?        @map("game_id")
  gameName      String         @map("game_name")
  gameCode      String         @unique @map("game_code")
  gameType      String?        @map("game_type")
  description   String?
  cover         String?
  status        Int            @default(1)
  technology    String?
  hasLobby      Int            @default(0) @map("has_lobby")
  isMobile      Int            @default(0) @map("is_mobile")
  hasFreespins  Int            @default(0) @map("has_freespins")
  hasTables     Int            @default(0) @map("has_tables")
  onlyDemo      Int            @default(0) @map("only_demo")
  rtp           Int?
  distribution  String?
  views         Int            @default(0)
  isFeatured    Int            @default(0) @map("is_featured")
  showHome      Int            @default(1) @map("show_home")
  createdAt     DateTime       @default(now()) @map("created_at")
  updatedAt     DateTime       @updatedAt @map("updated_at")
  categories    CategoryGame[]
  favorites     GameFavorite[]
  likes         GameLike[]
  reviews       GameReview[]
  provider      Provider       @relation(fields: [providerId], references: [id])

  @@map("games")
}

model CategoryGame {
  id         Int      @id @default(autoincrement())
  categoryId Int      @map("category_id")
  gameId     Int      @map("game_id")
  order      Int      @default(0)
  createdAt  DateTime @default(now()) @map("created_at")
  updatedAt  DateTime @updatedAt @map("updated_at")
  category   Category @relation(fields: [categoryId], references: [id])
  game       Game     @relation(fields: [gameId], references: [id])

  @@unique([categoryId, gameId])
  @@map("category_games")
}

model GameFavorite {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  gameId    Int      @map("game_id")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  game      Game     @relation(fields: [gameId], references: [id])
  user      User     @relation(fields: [userId], references: [id])

  @@unique([userId, gameId])
  @@map("game_favorites")
}

model GameLike {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  gameId    Int      @map("game_id")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  game      Game     @relation(fields: [gameId], references: [id])
  user      User     @relation(fields: [userId], references: [id])

  @@unique([userId, gameId])
  @@map("game_likes")
}

model GameReview {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  gameId    Int      @map("game_id")
  rating    Int
  comment   String?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  game      Game     @relation(fields: [gameId], references: [id])
  user      User     @relation(fields: [userId], references: [id])

  @@map("game_reviews")
}

model GamesKey {
  id                 Int      @id @default(autoincrement())
  apiEndpoint        String?  @map("api_endpoint")
  agentCode          String?  @map("agent_code")
  agentToken         String?  @map("agent_token")
  agentSecretKey     String?  @map("agent_secret_key")
  merchantUrl        String?  @map("merchant_url")
  merchantId         String?  @map("merchant_id")
  merchantKey        String?  @map("merchant_key")
  salsa              String?
  salsaSecretKey     String?  @map("salsa_secret_key")
  vibra              String?
  vibraPlayerPrefix  String?  @map("vibra_player_prefix")
  evergame           String?
  worldslot          String?
  worldslotSecretKey String?  @map("worldslot_secret_key")
  games2             String?
  games2SecretKey    String?  @map("games2_secret_key")
  venix              String?
  venixSecretKey     String?  @map("venix_secret_key")
  playgaming         String?
  playgamingMerchant String?  @map("playgaming_merchant")
  pgsoft             String?
  pgsoftGameUrl      String?  @map("pgsoft_game_url")
  pgsoftSecretKey    String?  @map("pgsoft_secret_key")
  createdAt          DateTime @default(now()) @map("created_at")
  updatedAt          DateTime @updatedAt @map("updated_at")

  @@map("games_keys")
}

model Mission {
  id                   Int           @id @default(autoincrement())
  challengeName        String        @map("challenge_name")
  challengeDescription String?       @map("challenge_description")
  challengeRules       String?       @map("challenge_rules")
  challengeType        String        @map("challenge_type")
  challengeLink        String?       @map("challenge_link")
  challengeStartDate   DateTime      @map("challenge_start_date")
  challengeEndDate     DateTime      @map("challenge_end_date")
  challengeBonus       Decimal       @map("challenge_bonus") @db.Decimal(20, 2)
  challengeTotal       Int           @map("challenge_total")
  influencerWinLength  Int?          @map("influencer_winLength")
  influencerLoseLength Int?          @map("influencer_loseLength")
  challengeCurrency    String        @default("BRL") @map("challenge_currency")
  challengeProvider    String?       @map("challenge_provider")
  challengeGameid      String?       @map("challenge_gameid")
  createdAt            DateTime      @default(now()) @map("created_at")
  updatedAt            DateTime      @updatedAt @map("updated_at")
  missionUsers         MissionUser[]

  @@map("missions")
}

model MissionUser {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  missionId Int      @map("mission_id")
  rounds    Int      @default(0)
  completed Boolean  @default(false)
  rewarded  Boolean  @default(false)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  mission   Mission  @relation(fields: [missionId], references: [id])
  user      User     @relation(fields: [userId], references: [id])

  @@unique([userId, missionId])
  @@map("mission_users")
}

model AffiliateHistory {
  id               Int      @id @default(autoincrement())
  userId           Int      @map("user_id")
  affiliateId      Int      @map("affiliate_id")
  commissionType   String   @map("commission_type")
  commissionValue  Decimal  @map("commission_value") @db.Decimal(20, 2)
  gameProvider     String?  @map("game_provider")
  gameId           String?  @map("game_id")
  transactionValue Decimal? @map("transaction_value") @db.Decimal(20, 2)
  receita          Decimal? @db.Decimal(20, 2)
  isPaid           Boolean  @default(false) @map("is_paid")
  createdAt        DateTime @default(now()) @map("created_at")
  updatedAt        DateTime @updatedAt @map("updated_at")
  user             User     @relation(fields: [userId], references: [id])

  @@map("affiliate_histories")
}

model AffiliateWithdraw {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  amount    Decimal  @db.Decimal(20, 2)
  proof     String?
  status    Int      @default(0)
  pixKey    String?  @map("pix_key")
  pixType   String?  @map("pix_type")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  user      User     @relation(fields: [userId], references: [id])

  @@map("affiliate_withdraws")
}

model SubAffiliate {
  id        Int      @id @default(autoincrement())
  userId    Int      @map("user_id")
  inviterId Int      @map("inviter_id")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  user      User     @relation(fields: [userId], references: [id])

  @@map("sub_affiliates")
}

model Vip {
  id        Int       @id @default(autoincrement())
  level     Int       @unique
  name      String
  minPoints Decimal   @map("min_points") @db.Decimal(20, 2)
  maxPoints Decimal   @map("max_points") @db.Decimal(20, 2)
  benefits  String?
  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")
  vipUsers  VipUser[]

  @@map("vips")
}

model VipUser {
  id        Int      @id @default(autoincrement())
  userId    Int      @unique @map("user_id")
  vipId     Int      @map("vip_id")
  points    Decimal  @default(0) @db.Decimal(20, 2)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  user      User     @relation(fields: [userId], references: [id])
  vip       Vip      @relation(fields: [vipId], references: [id])

  @@map("vip_users")
}

model SpinConfig {
  id        Int      @id @default(autoincrement())
  prizes    String
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("ggds_spin_config")
}

model SpinRun {
  id        Int      @id @default(autoincrement())
  key       String   @unique
  nonce     String
  prize     String?
  claimed   Boolean  @default(false)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("ggds_spin_runs")
}

model Setting {
  id                   Int      @id @default(autoincrement())
  softwareName         String?  @map("software_name")
  softwareDescription  String?  @map("software_description")
  softwareLogo         String?  @map("software_logo")
  softwareFavicon      String?  @map("software_favicon")
  currencyCode         String   @default("BRL") @map("currency_code")
  prefix               String   @default("R$")
  minDeposit           Decimal  @default(5) @map("min_deposit") @db.Decimal(20, 2)
  maxDeposit           Decimal  @default(10000) @map("max_deposit") @db.Decimal(20, 2)
  minWithdrawal        Decimal  @default(20) @map("min_withdrawal") @db.Decimal(20, 2)
  maxWithdrawal        Decimal  @default(5000) @map("max_withdrawal") @db.Decimal(20, 2)
  depositBonus         Decimal  @default(0) @map("deposit_bonus") @db.Decimal(5, 2)
  depositBonusRollover Decimal  @default(0) @map("deposit_bonus_rollover") @db.Decimal(10, 2)
  depositBonusFirstOnly Boolean @default(true) @map("deposit_bonus_first_only")
  rolloverProtection   Boolean  @default(false) @map("rollover_protection")
  disableSpin          Boolean  @default(false) @map("disable_spin")
  asaasIsEnable        Boolean  @default(false) @map("asaas_is_enable")
  affiliateBaseline    Decimal  @default(0) @map("affiliate_baseline") @db.Decimal(5, 2)
  signupBonus          Decimal  @default(0) @map("signup_bonus") @db.Decimal(20, 2)
  referralBonus        Decimal  @default(50) @map("referral_bonus") @db.Decimal(20, 2)
  createdAt            DateTime @default(now()) @map("created_at")
  updatedAt            DateTime @updatedAt @map("updated_at")

  @@map("settings")
}

model RolloverHistory {
  id             Int      @id @default(autoincrement())
  userId         Int      @map("user_id")
  betAmount      Decimal  @map("bet_amount") @db.Decimal(20, 2)
  rolloverBefore Decimal  @map("rollover_before") @db.Decimal(20, 2)
  rolloverAfter  Decimal  @map("rollover_after") @db.Decimal(20, 2)
  rolloverType   String   @map("rollover_type") // 'bonus' ou 'deposit'
  gameCode       String?  @map("game_code")
  createdAt      DateTime @default(now()) @map("created_at")

  @@map("rollover_history")
}

model Banner {
  id          Int      @id @default(autoincrement())
  title       String
  description String?
  image       String
  link        String?
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("banners")
}

model Gateway {
  id        Int      @id @default(autoincrement())
  name      String
  code      String   @unique
  apiKey    String?  @map("api_key")
  apiSecret String?  @map("api_secret")
  apiUrl    String?  @map("api_url")
  walletId  String?  @map("wallet_id")
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("gateways")
}

model Currency {
  id        Int      @id @default(autoincrement())
  name      String
  code      String   @unique
  symbol    String
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("currencies")
}

model CustomLayout {
  id        Int      @id @default(autoincrement())
  name      String
  header    String?
  body      String?
  footer    String?
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("custom_layouts")
}

model KwaiPixel {
  id          Int      @id @default(autoincrement())
  pixelId     String   @unique @map("pixel_id")
  accessToken String?  @map("access_token")
  name        String?
  description String?
  isActive    Boolean  @default(true) @map("is_active")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  @@map("kwai_pixels")
}
